<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="org.example.controller.MainController">

    <top>
        <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ -->
        <VBox fx:id="navPanel" spacing="0">
            <!-- Ð’ÐµÑ€Ñ…Ð½ÑÑ ÑÑ‚Ñ€Ð¾ÐºÐ°: ÑÑ…ÐµÐ¼Ð° + Ð¼ÐµÐ½ÑŽ -->
            <ToolBar fx:id="mainToolbar">
                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¼ÐµÐ½ÑŽ (Ñ‚Ñ€Ð¸ Ð¿Ð¾Ð»Ð¾ÑÐºÐ¸) -->
                <Button fx:id="menuButton" text="â˜°" onAction="#toggleNavigationMode"/>

                <!-- ÐšÐ¾Ð¼Ð±Ð¾Ð±Ð¾ÐºÑ Ð²Ñ‹Ð±Ð¾Ñ€Ð° ÑÑ…ÐµÐ¼Ñ‹ -->
                <Label text="Ð¡Ñ…ÐµÐ¼Ð°:"/>
                <ComboBox fx:id="schemaCombo" prefWidth="220" onAction="#onSchemaSelected"/>
                <Label fx:id="currentSchemaLabel" text="Ð¢ÐµÐºÑƒÑ‰Ð°Ñ: public" style="-fx-padding: 0 0 0 20;"/>

                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Ð‘Ð°Ð·Ð°:"/>
                <Label fx:id="dbNameLabel"/>
            </ToolBar>

            <!-- Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ (ÑÐºÑ€Ñ‹Ñ‚Ð° Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ) -->
            <ToolBar fx:id="extendedToolbar" visible="false" managed="false">
                <!-- Tables Ð¼ÐµÐ½ÑŽ -->
                <MenuButton text="Tables" popupSide="BOTTOM">
                    <items>
                        <MenuItem text="Create Table" onAction="#createTable"/>
                        <MenuItem text="Drop Table" onAction="#dropTable"/>
                        <SeparatorMenuItem/>
                        <MenuItem text="Refresh Tables" onAction="#refreshTablesList"/>
                    </items>
                </MenuButton>

                <!-- Backup Ð¼ÐµÐ½ÑŽ -->
                <MenuButton text="Backup" popupSide="BOTTOM">
                    <items>
                        <MenuItem text="Create Backup" onAction="#createBackup"/>
                        <MenuItem text="Restore from Backup" onAction="#restoreBackup"/>
                    </items>
                </MenuButton>

                <!-- Settings Ð¼ÐµÐ½ÑŽ -->
<!--                <MenuButton text="Settings" popupSide="BOTTOM">-->
<!--                    <items>-->
<!--                        <MenuItem text="Application Settings" onAction="#openSettings"/>-->
<!--                    </items>-->
<!--                </MenuButton>-->

                <MenuButton text="Export" popupSide="BOTTOM">
                    <items>
                        <MenuItem text="Export Current Schema" onAction="#exportCurrentSchema"/>
                    </items>
                </MenuButton>

                <Region HBox.hgrow="ALWAYS"/>
                <Button text="â‰¡" onAction="#toggleNavigationMode">
                    <tooltip>
                        <Tooltip text="Ð¡Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ Ð¼ÐµÐ½ÑŽ"/>
                    </tooltip>
                </Button>
            </ToolBar>
        </VBox>
    </top>

    <center>
        <SplitPane dividerPositions="0.2, 0.4">
            <items>
                <!-- Ð›ÐµÐ²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ (ÑÑ…ÐµÐ¼Ñ‹ ÑƒÐ±Ñ€Ð°Ð½Ñ‹, Ñ‚.Ðº. ÐµÑÑ‚ÑŒ ÐºÐ¾Ð¼Ð±Ð¾Ð±Ð¾ÐºÑ) -->
                <VBox spacing="6">
                    <padding>
                        <Insets top="8" right="8" bottom="8" left="8"/>
                    </padding>
                    <Label text="Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ ÑÑ…ÐµÐ¼Ñ‹" style="-fx-font-weight: bold;"/>
                    <ListView fx:id="tablesList" VBox.vgrow="ALWAYS"/>
                </VBox>

                <!-- Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: Ð²ÐºÐ»Ð°Ð´ÐºÐ¸ -->
                <TabPane tabClosingPolicy="UNAVAILABLE">
                    <tabs>
                        <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ° 1: Table Data (Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ°Ñ) -->
                        <Tab text="Table Data">
                            <VBox spacing="8">
                                <padding>
                                    <Insets top="8" right="8" bottom="8" left="8"/>
                                </padding>
                                <HBox spacing="8" alignment="CENTER_LEFT">
                                    <Label fx:id="currentTableLabel" text="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…" style="-fx-font-weight: bold;"/>
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <!-- ÐÐ¾Ð²Ñ‹Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸ -->
                                    <Button fx:id="addRecordButton" text="+" onAction="#addNewRecord" style="-fx-font-weight: bold; -fx-min-width: 30;">
                                        <tooltip>
                                            <Tooltip text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ"/>
                                        </tooltip>
                                    </Button>
                                    <Button fx:id="editRecordButton" text="âœŽ" onAction="#editSelectedRecord" disable="true" style="-fx-min-width: 30;">
                                        <tooltip>
                                            <Tooltip text="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ"/>
                                        </tooltip>
                                    </Button>
                                    <Button fx:id="deleteRecordButton" text="ðŸ—‘" onAction="#deleteSelectedRecord" disable="true" style="-fx-min-width: 30;">
                                        <tooltip>
                                            <Tooltip text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ"/>
                                        </tooltip>
                                    </Button>
                                    <Button text="ðŸ”„" onAction="#refreshTableData" style="-fx-min-width: 30;">
                                        <tooltip>
                                            <Tooltip text="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ"/>
                                        </tooltip>
                                    </Button>
                                    <Button text="ðŸ“Š" onAction="#exportCurrentTable" style="-fx-min-width: 30;">
                                        <tooltip>
                                            <Tooltip text="Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ð² Excel"/>
                                        </tooltip>
                                    </Button>
                                </HBox>
                                <TableView fx:id="tableView" VBox.vgrow="ALWAYS"/>
                            </VBox>
                        </Tab>
                        <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ° 2: Query Editor (Ð·Ð°Ñ€ÐµÐ·ÐµÑ€Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°) -->
                        <Tab text="Query">
                            <VBox spacing="8">
                                <padding>
                                    <Insets top="8" right="8" bottom="8" left="8"/>
                                </padding>
                                <HBox spacing="8" alignment="CENTER_LEFT">
                                    <Button text="Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ" onAction="#executeQuery"/>
                                    <Button text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ" onAction="#clearQuery"/>
                                    <Button text="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ" onAction="#saveCurrentQuery"/>
                                    <Button text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" onAction="#deleteSavedQuery"/>
                                    <ComboBox fx:id="savedQueriesCombo" promptText="Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹" prefWidth="200"/>
                                    <Button text="ðŸ“Š" onAction="#exportQueryResults" style="-fx-min-width: 30;">
                                        <tooltip>
                                            <Tooltip text="Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² Ð² Excel"/>
                                        </tooltip>
                                    </Button>
                                </HBox>
                                <TextArea fx:id="queryTextArea" promptText="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ SQL Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð·Ð´ÐµÑÑŒ..." VBox.vgrow="ALWAYS"/>
                                <Label text="Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:" style="-fx-font-weight: bold;"/>
                                <TableView fx:id="queryResultTable" prefHeight="200" VBox.vgrow="ALWAYS"/>
                            </VBox>
                        </Tab>
                    </tabs>
                </TabPane>
            </items>
        </SplitPane>
    </center>

    <bottom>
        <HBox alignment="CENTER_LEFT" style="-fx-background-color: #f0f0f0;">
            <padding>
                <Insets top="4" right="8" bottom="4" left="8"/>
            </padding>
            <Label fx:id="statusLabel" text="Ð“Ð¾Ñ‚Ð¾Ð²Ð¾"/>
        </HBox>
    </bottom>
</BorderPane>